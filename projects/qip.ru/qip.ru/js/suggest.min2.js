var suggest={highlighter:'internet',dis:false,sel_pr:false,go:false,myvar:'',sug_load:0,tot_select:0,sug_select:-1,got_sug:0,duration:500,sl:false,l:0,s:false,f:false,bl:false,fo:false,jsonp:false,lista:false,http:'',dx:0,dy:0,hc:0,bodyOffset:function(a){var b=a.offsetTop,left=a.offsetLeft;if(this.doesNotIncludeMarginInBodyOffset){b+=parseFloat(a.style.marginTop)||0};left+=parseFloat(a.style.marginLeft)||0;return{top:b,left:left}},offsetParent:function(a){var b=a.offsetParent||document.body;while(b&&(!/^body|html$/i.test(b.tagName)&&b.style.position=='static'))b=b.offsetParent;return b},init:function(b,c,d,e,f){this.s=this.gi(b);this.s.innerHTML='';this.f=this.gi(c);this.fo=this.gi(d);if(this.s==null||this.f==null||this.fo==null){return};var g=document.body,container=document.createElement('div'),innerDiv,checkDiv,table,td;var h=parseFloat(g.style.marginTop)||0,html='<div style="position: absolute;top: 0;left: 0;margin: 0;border: 5px solid #000;padding: 0;width: 1px;height: 1px;"><div></div></div><table style="position: absolute;top: 0;left: 0;margin: 0;border: 5px solid #000;padding: 0;width: 1px;height: 1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';container.innerHTML=html;g.insertBefore(container,g.firstChild);innerDiv=container.firstChild,checkDiv=innerDiv.firstChild,td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position='fixed',checkDiv.style.top='20px';this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position='',checkDiv.style.top='';innerDiv.style.overflow='hidden',innerDiv.style.position='relative';this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(g.offsetTop!==h);g.removeChild(container);var i=document.createElement("div");i.style.width=i.style.paddingLeft="1px";document.body.appendChild(i);this.boxModel=this.boxModel=i.offsetWidth===2;document.body.removeChild(i).style.display='none';body=container=innerDiv=checkDiv=table=td=i=null;if(typeof(f)!='undefined'){this.http=f};if(typeof(e)!='undefined'){e.onmousedown=function(){suggest.fl()}};if(this.s.length==0)return;window.onresize=function(){if(suggest.dis)return;suggest.pos()};window.onContextMenu=window.onblur=function(){suggest.hide();suggest.lista=false};this.pos();this.f.onblur=function(){if(suggest.dis)return;if(suggest.f.value!=suggest.myvar){setTimeout("suggest.s.innerHTML = '';suggest.tot_select = 0;",200)};suggest.bl=true;suggest.fl()};this.f.onfocus=function(){suggest.bl=false;if(suggest.dis)return;if(suggest.tot_select>0){suggest.show()}};this.addH(this.f,'keyup',function(a){if(!a)var a=window.event;if(suggest.dis)return false;if(a.keyCode)code=a.keyCode;else if(a.which)code=a.which;suggest.ev=false;switch(code){case 9:break;case 13:break;case 17:break;case 16:break;case 20:break;case 27:suggest.hide();suggest.sug_select=-1;break;case 38:clearTimeout(suggest.lista);if(suggest.lista!=false){clearTimeout(suggest.lista);suggest.lista=false};suggest.selSuggest(-1);return false;break;case 40:if(suggest.s.style.display=='none'&&suggest.s.childNodes.length==0){suggest.get();suggest.pos()};if(suggest.lista!=false){clearTimeout(suggest.lista);suggest.lista=false};suggest.selSuggest(1);return false;break;default:if(suggest.sl==false){suggest.sl=setTimeout("suggest.get();suggest.pos()",suggest.duration)};break};return false});this.addH(this.f,'keydown',function(a){if(!a)var a=window.event;if(a.keyCode)code=a.keyCode;else if(a.which)code=a.which;suggest.ev=a;switch(code){case 93:clearTimeout(suggest.lista);suggest.lista=false;suggest.hide();break;case 38:if(suggest.dis)return false;if(suggest.lista==false)suggest.lista=setTimeout('suggest.listal(-1);',300);return false;break;case 40:if(suggest.dis)return false;if(suggest.lista==false)suggest.lista=setTimeout('suggest.listal(1);',300);return false;break}})},fl:function(){setTimeout("suggest.hide();suggest.sug_select = -1;",200)},gi:function(a){return document.getElementById(a)},highlighters:{'internet':function(a,b,x){var c='';if(b[1].toString()=='2'){c='<b class="pr">'+b[0]+'</b>'}else if(parseInt(b[1])>2&&suggest_wiz.wiz[b[1]]){c=suggest_wiz(b[1],a,b,x)}else{c='<b>'+b[0]+'</b>'};return c},'maps':function(a,b,x){var c=new RegExp('('+a+')','ig');return b[0].replace(c,'<i>$1</i>')}},cb:function(a){this.l=0;if(this.dis)return;this.tot_select=0;this.s.innerHTML='';if(a.length==0||a[1].length==0){this.hide();return}else{for(var i=0;i<a[1].length;i++){var x=document.createElement('a');x.href='#';if(a[1][i][1]>2){};x.innerHTML=this.highlighters[this.highlighter](a[0],a[1][i],x);x.onclick=function(){suggest.setSuggest(this);suggest.hide();return false};x.onmouseover=function(){suggest.hSuggest(this)};this.s.appendChild(x)}};var x=document.createElement('div');x.innerHTML='<a href="#" class="sclose">Закрыть</a>';this.s.appendChild(x);this.sug_select=-1;this.tot_select=i;this.s.scrollTop=0;if(!suggest.bl)this.show()},disable:function(){this.dis=true;this.s.innerHTML='';return true},enable:function(){this.dis=false;return true},setSuggest:function(a){this.hc=1;if(a.className.match(/sugwiz/)){window.location=a.href.toString();return false};this.sel_pr=(a.childNodes[0].className=='pr');if(typeof(a.childNodes)!='undefined'&&a.childNodes.length==1){this.f.value=a.innerHTML.replace(/(<\/?[\S][^>]*>)/gi,'')}else{for(var i in a.childNodes){if(a.childNodes[i].tagName=='B'){this.f.value=a.childNodes[i].innerHTML.replace(/(<\/?[\S][^>]*>)/gi,'');break}}};this.sug_select=-1;if(typeof(this.goSearch)=='function'){this.goSearch(this.fo,this.f)}},hSuggest:function(a){if(this.dis)return;if(this.sug_select>=0)this.s.childNodes[this.sug_select].className=this.s.childNodes[this.sug_select].className.replace(' selected','');for(var i=0;i<this.s.childNodes.length;i++){if(this.s.childNodes[i]==a){this.sug_select=i}else if(this.s.childNodes[i].className!='sclose'){this.s.childNodes[i].className=this.s.childNodes[i].className.replace(' selected','')}};try{a.className=a.className.replace(' selected','')+' selected'}catch(e){}},b:function(){var a=navigator.userAgent,gecko=/Gecko\//.test(a)?a.match(/; rv: 1\.(\d+?)\.(\d)/):0,webkit=/AppleWebKit/.test(a),safari=webkit&&/Safari\//.test(a),ie=0;/*@cc_on+@_jscript_version*10%10@*/;var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if((ie==7||ie==8)&&b.exec(a)!=null){ie=parseFloat(RegExp.$1)};return{ie:ie>=5?ie:0,opera:window.opera&&opera.version?opera.version()[0]:0,safari:safari&&/Version\//.test(a)?a.match(/Version\/(\d{1})/)[1]:0,chrome:safari&&/Chrome\//.test(a)?a.match(/Chrome\/(\d+?\.\d)/)[1]:0}}(),pos:function(){if(!this.f)return;co=this.fpos(this.f);this.s.style.left=co[0]+'px';var a=this.height(this.f);var b=this.f.clientWidth;if(this.b.ie==6){b-=2;a+=1}else if(this.b.ie>0){a+=1};this.s.style.top=(co[1]+a-1)+'px';this.s.style.width=(b)+'px'},get:function(){this.sl=false;w=this.f.value;w=w.replace(/^\s+/,'');w=this.preesc(w);if(w.length<3){this.hide();this.l=0;return};this.myvar=this.f.value;if(this.l>0)return;this.l=1;this.query(w)},query:function(x){this.jsonp=document.createElement('script');this.jsonp.src=this.http+this.esc(w.toLowerCase())+'&from=web&rnd='+Math.random();document.body.appendChild(this.jsonp)},listal:function(a){if(this.lista==false)return;if(a==-1)this.lista=setInterval('suggest.selSuggest(-1);',40);if(a==1)this.lista=setInterval('suggest.selSuggest(1);',40)},selSuggest:function(a){if(this.s.style.display=='none')return false;if(this.tot_select<1)return;n=-1;if(this.sug_select>=0){if(typeof(this.s.childNodes[this.sug_select])!='undefined'){this.s.childNodes[this.sug_select].className=this.s.childNodes[this.sug_select].className.replace(' selected','')};if(this.sug_select==0&&a==-1){this.sug_select=-1;this.f.value=this.myvar;return};if(this.sug_select+a<0){n=this.tot_select-1}else if(this.sug_select+a>this.tot_select-1){n=0}else{n=this.sug_select+a}}else{if(a==-1){var n=this.tot_select-1}else{var n=0}};if(n>=0){tag_a=this.s.childNodes[n];tag_a.className=tag_a.className.replace(' selected','')+' selected';this.sug_select=n;if(tag_a.childNodes.length==1){this.f.value=tag_a.innerHTML.replace(/(<\/?[\S][^>]*>)/gi,'')}else{var b=false;for(var i in tag_a.childNodes){if(tag_a.childNodes[i].tagName=='B'){b=true;this.f.value=tag_a.childNodes[i].innerHTML.replace(/(<\/?[\S][^>]*>)/gi,'')}};if(b===false){this.f.value=tag_a.innerHTML.replace(/(<\/?[\S][^>]*>)/gi,'')}}}},addH:function(o,e,h){if(o.addEventListener){o.addEventListener(e,h,false)}else if(o.attachEvent){o.attachEvent('on'+e,h)}},height:function(a){return Math.max(a.scrollHeight,a.offsetHeight)},hide:function(){this.s.style.display='none';clearTimeout(suggest.lista)},isHidden:function(){return(this.s.style.display!='none')},show:function(){if(this.s.innerHTML!=''){this.s.style.display='block'}},url:function(s){this.http=s},preesc:function(s){return s.split('\\').join('')},esc:function(s){s=encodeURI(s);var h=["!","#","$","=",": ",",",";","?","'","(",")","&"];var a=['%21','%23','%24','%3D','%3A','%2C','%3B','%3F','%27','%28','%29','%26'];for(var i=0;i<h.length;i++){s=s.split(h[i]).join(a[i])};return s},addI:function(a,b){var x=document.createElement('input');x.name=a;x.type='hidden';x.value=b;this.fo.appendChild(x)}};if("getBoundingClientRect"in document.documentElement){suggest.fpos=function(a){if(!a||!a.ownerDocument)return null;if(a===a.ownerDocument.body)return this.bodyOffset(a);var b=a.getBoundingClientRect();var c=a.ownerDocument;var d=c.body;var e=c.documentElement;var f=window.pageYOffset||e.scrollTop||d.scrollTop;var g=window.pageXOffset||e.scrollLeft||d.scrollLeft;var h=e.clientTop||d.clientTop||0;var i=e.clientLeft||d.clientLeft||0;var j=b.top+(self.pageYOffset||this.boxModel&&e.scrollTop||d.scrollTop)-h;var k=b.left+(self.pageXOffset||this.boxModel&&e.scrollLeft||d.scrollLeft)-i;return[Math.round(k),Math.round(j)]}}else{suggest.fpos=function(a){if(!a||!a.ownerDocument)return null;if(a===a.ownerDocument.body)return this.bodyOffset(a);var b=a.offsetParent,prevOffsetParent=a,doc=a.ownerDocument,computedStyle,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView.getComputedStyle(a,null),top=a.offsetTop,left=a.offsetLeft;while((a=a.parentNode)&&a!==body&&a!==docElem){if(this.supportsFixedPosition&&prevComputedStyle.position==="fixed")break;computedStyle=defaultView.getComputedStyle(a,null);top-=a.scrollTop,left-=a.scrollLeft;if(a===b){top+=a.offsetTop,left+=a.offsetLeft;if(this.doesNotAddBorder&&!(this.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(a.tagName)))top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevOffsetParent=b,b=a.offsetParent};if(this.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible")top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevComputedStyle=computedStyle};if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static")top+=body.offsetTop,left+=body.offsetLeft;if(this.supportsFixedPosition&&prevComputedStyle.position==="fixed")top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft);return[left,top]}};function suggest_wiz(n,a,b,x){x.className='sugwiz',x.href='http://'+b[2]+(b[2].match('\\?')?'&':'?')+'from2=sug2';var c=arguments.callee.wiz[n];return'<img src="'+c.icon+'" /> <b>'+b[0].replace(a,'<b>'+a+'</b>')+'</b><br/><span>Перейти на сайт '+c.host+'</span>'};suggest_wiz.wiz={3:{host:'horo.qip.ru',icon:'../horo.qip.ru/favicon.ico'},4:{host:'pogoda.rbc.ru',icon:'../search.qip.ru/skin/img/pogoda.gif'},5:{host:'horo.qip.ru',icon:'../horo.qip.ru/favicon.ico'},6:{host:'maps.qip.ru',icon:'../maps.qip.ru/favicon.ico'},9:{host:'voip.qip.ru',icon:'../search.qip.ru/skin/img/voip.gif'},11:{host:'love.qip.ru',icon:'../search.qip.ru/skin/img/love.gif'},12:{host:'job.qip.ru',icon:'../search.qip.ru/skin/img/job.gif'},13:{host:'referats.qip.ru',icon:'../search.qip.ru/skin/img/referats.gif'},14:{host:'horo.qip.ru',icon:'../horo.qip.ru/favicon.ico'},15:{host:'flowers.qip.ru',icon:'../search.qip.ru/skin/wizard/flowers.gif'},18:{host:'torrchok.net',icon:'../torrchok.net/favicon.ico'},19:{host:'kards.qip.ru',icon:'../search.qip.ru/skin/img/wallpapers.gif'},20:{host:'qip.ru',icon:'../qip.ru/favicon.ico'},21:{host:'kards.qip.ru',icon:'../search.qip.ru/skin/img/avatars.gif'},22:{host:'smotri.com',icon:'../search.qip.ru/skin/img/tv.gif'},23:{host:'kards.qip.ru',icon:'../search.qip.ru/skin/img/cards.gif'},24:{host:'search.files.qip.ru',icon:'../search.qip.ru/skin/img/files.gif'}};
